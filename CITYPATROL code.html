<pre><font color="#ffffff"><br /></font><font color="#24ac96">globals</font><font color="#ffffff"> [<br />  detection-radius<br />  failure-rate<br />  is-day?<br />  max-suspects<br />  suspect-spawn-rate<br />  false-positive-rate<br />  arrests<br />  false-positives<br />]<br /><br /><br /><br /></font><font color="#be55be">breed</font><font color="#ffffff"> [polices police]<br /></font><font color="#be55be">breed</font><font color="#ffffff"> [pedestrians pedestrian]<br /></font><font color="#be55be">breed</font><font color="#ffffff"> [suspects suspect]<br /><br /><br /></font><font color="#24ac96">patches-own</font><font color="#ffffff"> [<br />  zone-id<br />]<br /><br /><br /></font><font color="#24ac96">turtles-own</font><font color="#ffffff"> [<br />  zone<br />  status<br />  last-heard-tick<br />  role<br />  energy<br />  repair-timer<br />  target-suspect<br />  false-target?<br />]<br /><br /><br /><br /><br /><br /><br /></font><font color="#969696">;; 1. The Fixed Setup Procedure</font><font color="#ffffff"><br /></font><font color="#24ac96">to</font><font color="#ffffff"> setup<br />  </font><font color="#06b7ff">clear-all</font><font color="#ffffff"><br />  </font><font color="#06b7ff">reset-ticks</font><font color="#ffffff"><br />  </font><font color="#06b7ff">set</font><font color="#ffffff"> detection-radius </font><font color="#ea6e21">3</font><font color="#ffffff"><br />  </font><font color="#06b7ff">set</font><font color="#ffffff"> failure-rate </font><font color="#ea6e21">0.001</font><font color="#ffffff"><br />  </font><font color="#06b7ff">set</font><font color="#ffffff"> is-day? </font><font color="#ea6e21">true</font><font color="#ffffff"><br />  setup-zones<br />  setup-drones<br />  setup-suspects<br />  </font><font color="#06b7ff">set</font><font color="#ffffff"> max-suspects </font><font color="#ea6e21">15</font><font color="#ffffff"><br />  </font><font color="#06b7ff">set</font><font color="#ffffff"> suspect-spawn-rate </font><font color="#ea6e21">0.01</font><font color="#ffffff">  </font><font color="#969696">;; 1% chance per tick</font><font color="#ffffff"><br />  setup-police<br />  setup-pedestrians<br />  </font><font color="#06b7ff">set</font><font color="#ffffff"> false-positive-rate </font><font color="#ea6e21">0.002</font><font color="#ffffff">   </font><font color="#969696">;; very very small</font><font color="#ffffff"><br />  </font><font color="#06b7ff">set</font><font color="#ffffff"> arrests </font><font color="#ea6e21">0</font><font color="#ffffff"><br />  </font><font color="#06b7ff">set</font><font color="#ffffff"> false-positives </font><font color="#ea6e21">0</font><font color="#ffffff"><br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> setup-zones<br />  </font><font color="#06b7ff">let</font><font color="#ffffff"> grid-size </font><font color="#ea6e21">16</font><font color="#ffffff"><br />  </font><font color="#06b7ff">let</font><font color="#ffffff"> zone-width (</font><font color="#be55be">max-pxcor</font><font color="#ffffff"> </font><font color="#be55be">-</font><font color="#ffffff"> </font><font color="#be55be">min-pxcor</font><font color="#ffffff"> </font><font color="#be55be">+</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff">) </font><font color="#be55be">/</font><font color="#ffffff"> grid-size<br /><br />  </font><font color="#06b7ff">ask</font><font color="#ffffff"> </font><font color="#be55be">patches</font><font color="#ffffff"> [<br />    </font><font color="#06b7ff">let</font><font color="#ffffff"> x-zone </font><font color="#be55be">floor</font><font color="#ffffff"> ((</font><font color="#be55be">pxcor</font><font color="#ffffff"> </font><font color="#be55be">-</font><font color="#ffffff"> </font><font color="#be55be">min-pxcor</font><font color="#ffffff">) </font><font color="#be55be">/</font><font color="#ffffff"> zone-width)<br />    </font><font color="#06b7ff">let</font><font color="#ffffff"> y-zone </font><font color="#be55be">floor</font><font color="#ffffff"> ((</font><font color="#be55be">pycor</font><font color="#ffffff"> </font><font color="#be55be">-</font><font color="#ffffff"> </font><font color="#be55be">min-pycor</font><font color="#ffffff">) </font><font color="#be55be">/</font><font color="#ffffff"> zone-width)<br /><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> zone-id (y-zone </font><font color="#be55be">*</font><font color="#ffffff"> grid-size </font><font color="#be55be">+</font><font color="#ffffff"> x-zone </font><font color="#be55be">+</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff">)<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">pcolor</font><font color="#ffffff"> </font><font color="#be55be">scale-color</font><font color="#ffffff"> </font><font color="#ea6e21">green</font><font color="#ffffff"> zone-id </font><font color="#ea6e21">1</font><font color="#ffffff"> (grid-size </font><font color="#be55be">*</font><font color="#ffffff"> grid-size)<br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> setup-drones<br />  </font><font color="#06b7ff">create-turtles</font><font color="#ffffff"> </font><font color="#ea6e21">30</font><font color="#ffffff"> [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">shape</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;airplane&quot;</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">size</font><font color="#ffffff"> </font><font color="#ea6e21">1.2</font><font color="#ffffff"><br />    </font><font color="#06b7ff">move-to</font><font color="#ffffff"> </font><font color="#be55be">one-of</font><font color="#ffffff"> </font><font color="#be55be">patches</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> zone [zone-id] </font><font color="#be55be">of</font><font color="#ffffff"> </font><font color="#be55be">patch-here</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> last-heard-tick </font><font color="#be55be">ticks</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> energy </font><font color="#ea6e21">100</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> repair-timer </font><font color="#ea6e21">0</font><font color="#ffffff"><br /><br /><br /><br />    </font><font color="#06b7ff">ifelse</font><font color="#ffffff"> </font><font color="#be55be">who</font><font color="#ffffff"> </font><font color="#be55be">&lt;</font><font color="#ffffff"> </font><font color="#ea6e21">24</font><font color="#ffffff"> [<br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> role </font><font color="#ea6e21">&quot;main&quot;</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;patrol&quot;</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">black</font><font color="#ffffff"><br />    ] [<br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> role </font><font color="#ea6e21">&quot;backup&quot;</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;standby&quot;</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">gray</font><font color="#ffffff"><br />    ]<br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> go<br />  update-day-night<br />  spawn-suspects<br />  move-police<br />  move-pedestrians<br />  update-plot<br /><br />  <br />  </font><font color="#06b7ff">ask</font><font color="#ffffff"> </font><font color="#be55be">turtles</font><font color="#ffffff"> [<br />    </font><font color="#06b7ff">if</font><font color="#ffffff"> status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;failed&quot;</font><font color="#ffffff"> [<br />      repair-drone<br />    ]<br /><br />    </font><font color="#06b7ff">if</font><font color="#ffffff"> status </font><font color="#be55be">!=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;failed&quot;</font><font color="#ffffff"> [<br />      maybe-fail<br />      consume-energy<br />      check-energy<br /><br />      </font><font color="#06b7ff">if</font><font color="#ffffff"> role </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;main&quot;</font><font color="#ffffff"> </font><font color="#be55be">and</font><font color="#ffffff"> status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;patrol&quot;</font><font color="#ffffff"> [<br />        patrol<br />        check-handover<br />        communicate<br />      ]<br /><br />      </font><font color="#06b7ff">if</font><font color="#ffffff"> status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;tracking&quot;</font><font color="#ffffff"> [<br />        track-suspect<br />        communicate<br />      ]<br /><br />      monitor-failures<br />    ]<br />  ]<br /><br />  move-suspects<br />  </font><font color="#06b7ff">tick</font><font color="#ffffff"><br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> patrol<br />  detect-suspect<br /><br />  </font><font color="#06b7ff">rt</font><font color="#ffffff"> </font><font color="#be55be">random</font><font color="#ffffff"> </font><font color="#ea6e21">60</font><font color="#ffffff"><br />  </font><font color="#06b7ff">lt</font><font color="#ffffff"> </font><font color="#be55be">random</font><font color="#ffffff"> </font><font color="#ea6e21">60</font><font color="#ffffff"><br />  </font><font color="#06b7ff">fd</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"><br /><br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> [zone-id] </font><font color="#be55be">of</font><font color="#ffffff"> </font><font color="#be55be">patch-here</font><font color="#ffffff"> </font><font color="#be55be">!=</font><font color="#ffffff"> zone [<br />    </font><font color="#06b7ff">bk</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"><br />    </font><font color="#06b7ff">rt</font><font color="#ffffff"> </font><font color="#ea6e21">180</font><font color="#ffffff"><br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> communicate<br />  </font><font color="#969696">;; Optimization: Use `zone` directly, not `[zone] of myself`</font><font color="#ffffff"><br />  </font><font color="#06b7ff">let</font><font color="#ffffff"> zone-mates </font><font color="#be55be">turtles</font><font color="#ffffff"> </font><font color="#be55be">with</font><font color="#ffffff"> [zone </font><font color="#be55be">=</font><font color="#ffffff"> zone </font><font color="#be55be">and</font><font color="#ffffff"> </font><font color="#be55be">self</font><font color="#ffffff"> </font><font color="#be55be">!=</font><font color="#ffffff"> </font><font color="#be55be">myself</font><font color="#ffffff">]<br /><br />  </font><font color="#06b7ff">ask</font><font color="#ffffff"> zone-mates [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> last-heard-tick </font><font color="#be55be">ticks</font><font color="#ffffff"><br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> setup-pedestrians<br />  create-pedestrians </font><font color="#ea6e21">20</font><font color="#ffffff"> [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">shape</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;person&quot;</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">brown</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">size</font><font color="#ffffff"> </font><font color="#ea6e21">1.2</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> false-target? </font><font color="#ea6e21">false</font><font color="#ffffff"><br />    </font><font color="#06b7ff">move-to</font><font color="#ffffff"> </font><font color="#be55be">one-of</font><font color="#ffffff"> </font><font color="#be55be">patches</font><font color="#ffffff"><br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> move-pedestrians<br />  </font><font color="#06b7ff">ask</font><font color="#ffffff"> pedestrians [<br />    </font><font color="#06b7ff">rt</font><font color="#ffffff"> </font><font color="#be55be">random</font><font color="#ffffff"> </font><font color="#ea6e21">40</font><font color="#ffffff"><br />    </font><font color="#06b7ff">lt</font><font color="#ffffff"> </font><font color="#be55be">random</font><font color="#ffffff"> </font><font color="#ea6e21">40</font><font color="#ffffff"><br />    </font><font color="#06b7ff">fd</font><font color="#ffffff"> </font><font color="#ea6e21">0.5</font><font color="#ffffff"><br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> setup-suspects<br />  create-suspects </font><font color="#ea6e21">5</font><font color="#ffffff"> [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">shape</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;person&quot;</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">red</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">size</font><font color="#ffffff"> </font><font color="#ea6e21">1.3</font><font color="#ffffff"><br />    </font><font color="#06b7ff">move-to</font><font color="#ffffff"> </font><font color="#be55be">one-of</font><font color="#ffffff"> </font><font color="#be55be">patches</font><font color="#ffffff"><br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> setup-police<br />  create-polices </font><font color="#ea6e21">6</font><font color="#ffffff"> [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">shape</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;person&quot;</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">sky</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">size</font><font color="#ffffff"> </font><font color="#ea6e21">1.4</font><font color="#ffffff"><br />    </font><font color="#06b7ff">move-to</font><font color="#ffffff"> </font><font color="#be55be">one-of</font><font color="#ffffff"> </font><font color="#be55be">patches</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;idle&quot;</font><font color="#ffffff"><br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> spawn-suspects<br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> </font><font color="#be55be">count</font><font color="#ffffff"> suspects </font><font color="#be55be">&lt;</font><font color="#ffffff"> max-suspects [<br />    </font><font color="#06b7ff">if</font><font color="#ffffff"> </font><font color="#be55be">random-float</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"> </font><font color="#be55be">&lt;</font><font color="#ffffff"> suspect-spawn-rate [<br />      create-suspects </font><font color="#ea6e21">1</font><font color="#ffffff"> [<br />        </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">shape</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;person&quot;</font><font color="#ffffff"><br />        </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">red</font><font color="#ffffff"><br />        </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">size</font><font color="#ffffff"> </font><font color="#ea6e21">1.3</font><font color="#ffffff"><br />        </font><font color="#06b7ff">move-to</font><font color="#ffffff"> </font><font color="#be55be">one-of</font><font color="#ffffff"> </font><font color="#be55be">patches</font><font color="#ffffff"><br />      ]<br />    ]<br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> move-suspects<br />  </font><font color="#06b7ff">ask</font><font color="#ffffff"> suspects [<br />    </font><font color="#06b7ff">rt</font><font color="#ffffff"> </font><font color="#be55be">random</font><font color="#ffffff"> </font><font color="#ea6e21">60</font><font color="#ffffff"><br />    </font><font color="#06b7ff">lt</font><font color="#ffffff"> </font><font color="#be55be">random</font><font color="#ffffff"> </font><font color="#ea6e21">60</font><font color="#ffffff"><br />    </font><font color="#06b7ff">fd</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"><br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> track-suspect<br />  </font><font color="#06b7ff">let</font><font color="#ffffff"> target </font><font color="#be55be">one-of</font><font color="#ffffff"> suspects </font><font color="#be55be">in-radius</font><font color="#ffffff"> detection-radius<br />               </font><font color="#be55be">with</font><font color="#ffffff"> [ [zone-id] </font><font color="#be55be">of</font><font color="#ffffff"> </font><font color="#be55be">patch-here</font><font color="#ffffff"> </font><font color="#be55be">=</font><font color="#ffffff"> [zone] </font><font color="#be55be">of</font><font color="#ffffff"> </font><font color="#be55be">myself</font><font color="#ffffff"> ]<br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">violet</font><font color="#ffffff"> [<br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> </font><font color="#be55be">not</font><font color="#ffffff"> </font><font color="#be55be">any?</font><font color="#ffffff"> pedestrians </font><font color="#be55be">in-radius</font><font color="#ffffff"> detection-radius </font><font color="#be55be">with</font><font color="#ffffff"> [false-target?] [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;patrol&quot;</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">black</font><font color="#ffffff"><br />    </font><font color="#06b7ff">stop</font><font color="#ffffff"><br />  ]<br />]<br /><br /><br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> target </font><font color="#be55be">!=</font><font color="#ffffff"> </font><font color="#ea6e21">nobody</font><font color="#ffffff"> [<br />    </font><font color="#06b7ff">face</font><font color="#ffffff"> target<br />    </font><font color="#06b7ff">fd</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"><br />  ]<br /><br />  </font><font color="#969696">;; Stop tracking if suspect leaves zone</font><font color="#ffffff"><br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> </font><font color="#be55be">not</font><font color="#ffffff"> suspect-in-my-zone? [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;patrol&quot;</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">black</font><font color="#ffffff"><br />  ]<br /><br />  </font><font color="#969696">;; HARD SAFETY: never leave the zone</font><font color="#ffffff"><br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> [zone-id] </font><font color="#be55be">of</font><font color="#ffffff"> </font><font color="#be55be">patch-here</font><font color="#ffffff"> </font><font color="#be55be">!=</font><font color="#ffffff"> zone [<br />    </font><font color="#06b7ff">bk</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"><br />    </font><font color="#06b7ff">rt</font><font color="#ffffff"> </font><font color="#ea6e21">180</font><font color="#ffffff"><br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> detect-suspect<br />  </font><font color="#969696">;; real suspect</font><font color="#ffffff"><br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> suspect-in-my-zone? [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;tracking&quot;</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">orange</font><font color="#ffffff"><br />    alert-police<br />    </font><font color="#06b7ff">stop</font><font color="#ffffff"><br />  ]<br /><br />  </font><font color="#969696">;; false positive</font><font color="#ffffff"><br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> </font><font color="#be55be">random-float</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"> </font><font color="#be55be">&lt;</font><font color="#ffffff"> false-positive-rate [<br />    </font><font color="#06b7ff">let</font><font color="#ffffff"> target </font><font color="#be55be">one-of</font><font color="#ffffff"> pedestrians </font><font color="#be55be">in-radius</font><font color="#ffffff"> detection-radius<br />    </font><font color="#06b7ff">if</font><font color="#ffffff"> target </font><font color="#be55be">!=</font><font color="#ffffff"> </font><font color="#ea6e21">nobody</font><font color="#ffffff"> [<br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;tracking&quot;</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">violet</font><font color="#ffffff"><br />      </font><font color="#06b7ff">ask</font><font color="#ffffff"> target [<br />        </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">violet</font><font color="#ffffff"><br />        </font><font color="#06b7ff">set</font><font color="#ffffff"> false-target? </font><font color="#ea6e21">true</font><font color="#ffffff"><br />      ]<br />      alert-police-false target<br />    ]<br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> alert-police<br />  </font><font color="#06b7ff">let</font><font color="#ffffff"> target </font><font color="#be55be">one-of</font><font color="#ffffff"> suspects </font><font color="#be55be">in-radius</font><font color="#ffffff"> detection-radius<br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> target </font><font color="#be55be">!=</font><font color="#ffffff"> </font><font color="#ea6e21">nobody</font><font color="#ffffff"> [<br />    </font><font color="#06b7ff">let</font><font color="#ffffff"> nearest-police </font><font color="#be55be">min-one-of</font><font color="#ffffff"> polices [</font><font color="#be55be">distance</font><font color="#ffffff"> target]<br />    </font><font color="#06b7ff">ask</font><font color="#ffffff"> nearest-police [<br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;responding&quot;</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> target-suspect target<br />    ]<br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> alert-police-false [target]<br />  </font><font color="#06b7ff">let</font><font color="#ffffff"> nearest-police </font><font color="#be55be">min-one-of</font><font color="#ffffff"> polices [</font><font color="#be55be">distance</font><font color="#ffffff"> target]<br />  </font><font color="#06b7ff">ask</font><font color="#ffffff"> nearest-police [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;responding-false&quot;</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> target-suspect target<br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> move-police<br />  </font><font color="#06b7ff">ask</font><font color="#ffffff"> polices [<br /><br />    </font><font color="#969696">;; real arrest</font><font color="#ffffff"><br />    </font><font color="#06b7ff">if</font><font color="#ffffff"> status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;responding&quot;</font><font color="#ffffff"> </font><font color="#be55be">and</font><font color="#ffffff"> target-suspect </font><font color="#be55be">!=</font><font color="#ffffff"> </font><font color="#ea6e21">nobody</font><font color="#ffffff"> [<br />      </font><font color="#06b7ff">face</font><font color="#ffffff"> target-suspect<br />      </font><font color="#06b7ff">fd</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"><br /><br />      </font><font color="#06b7ff">if</font><font color="#ffffff"> </font><font color="#be55be">distance</font><font color="#ffffff"> target-suspect </font><font color="#be55be">&lt;</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"> [<br />        </font><font color="#06b7ff">ask</font><font color="#ffffff"> target-suspect [ </font><font color="#06b7ff">die</font><font color="#ffffff"> ]<br />        </font><font color="#06b7ff">set</font><font color="#ffffff"> arrests arrests </font><font color="#be55be">+</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"><br />        </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;idle&quot;</font><font color="#ffffff"><br />        </font><font color="#06b7ff">set</font><font color="#ffffff"> target-suspect </font><font color="#ea6e21">nobody</font><font color="#ffffff"><br />      ]<br />    ]<br /><br />    </font><font color="#969696">;; false positive</font><font color="#ffffff"><br />    </font><font color="#06b7ff">if</font><font color="#ffffff"> status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;responding-false&quot;</font><font color="#ffffff"> </font><font color="#be55be">and</font><font color="#ffffff"> target-suspect </font><font color="#be55be">!=</font><font color="#ffffff"> </font><font color="#ea6e21">nobody</font><font color="#ffffff"> [<br />      </font><font color="#06b7ff">face</font><font color="#ffffff"> target-suspect<br />      </font><font color="#06b7ff">fd</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"><br /><br />      </font><font color="#06b7ff">if</font><font color="#ffffff"> </font><font color="#be55be">distance</font><font color="#ffffff"> target-suspect </font><font color="#be55be">&lt;</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"> [<br />        </font><font color="#06b7ff">ask</font><font color="#ffffff"> target-suspect [<br />          </font><font color="#06b7ff">rt</font><font color="#ffffff"> </font><font color="#be55be">random</font><font color="#ffffff"> </font><font color="#ea6e21">180</font><font color="#ffffff"><br />          </font><font color="#06b7ff">fd</font><font color="#ffffff"> </font><font color="#ea6e21">5</font><font color="#ffffff"><br />          </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">brown</font><font color="#ffffff"><br />          </font><font color="#06b7ff">set</font><font color="#ffffff"> false-target? </font><font color="#ea6e21">false</font><font color="#ffffff"><br />        ]<br />        </font><font color="#06b7ff">set</font><font color="#ffffff"> false-positives false-positives </font><font color="#be55be">+</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"><br />        </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;idle&quot;</font><font color="#ffffff"><br />        </font><font color="#06b7ff">set</font><font color="#ffffff"> target-suspect </font><font color="#ea6e21">nobody</font><font color="#ffffff"><br />      ]<br />    ]<br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /><br /><br /></font><font color="#24ac96">to-report</font><font color="#ffffff"> suspect-in-my-zone?<br />  </font><font color="#06b7ff">report</font><font color="#ffffff"> </font><font color="#be55be">any?</font><font color="#ffffff"> suspects </font><font color="#be55be">in-radius</font><font color="#ffffff"> detection-radius<br />         </font><font color="#be55be">with</font><font color="#ffffff"> [ [zone-id] </font><font color="#be55be">of</font><font color="#ffffff"> </font><font color="#be55be">patch-here</font><font color="#ffffff"> </font><font color="#be55be">=</font><font color="#ffffff"> [zone] </font><font color="#be55be">of</font><font color="#ffffff"> </font><font color="#be55be">myself</font><font color="#ffffff"> ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> check-handover<br />  </font><font color="#969696">;; If a suspect is close AND inside my zone, I can take over tracking</font><font color="#ffffff"><br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;patrol&quot;</font><font color="#ffffff"> </font><font color="#be55be">and</font><font color="#ffffff"> suspect-in-my-zone? [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;tracking&quot;</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">orange</font><font color="#ffffff"><br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> maybe-fail<br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> role </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;main&quot;</font><font color="#ffffff"> </font><font color="#be55be">and</font><font color="#ffffff"> status </font><font color="#be55be">!=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;failed&quot;</font><font color="#ffffff"> [<br />    </font><font color="#06b7ff">if</font><font color="#ffffff"> </font><font color="#be55be">random-float</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"> </font><font color="#be55be">&lt;</font><font color="#ffffff"> failure-rate [<br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;failed&quot;</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">red</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> repair-timer </font><font color="#ea6e21">100</font><font color="#ffffff"> </font><font color="#be55be">+</font><font color="#ffffff"> </font><font color="#be55be">random</font><font color="#ffffff"> </font><font color="#ea6e21">50</font><font color="#ffffff">  </font><font color="#969696">;; 100â€“150 ticks</font><font color="#ffffff"><br />    ]<br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> repair-drone<br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;failed&quot;</font><font color="#ffffff"> [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> repair-timer repair-timer </font><font color="#be55be">-</font><font color="#ffffff"> </font><font color="#ea6e21">1</font><font color="#ffffff"><br /><br />    </font><font color="#06b7ff">if</font><font color="#ffffff"> repair-timer </font><font color="#be55be">&lt;=</font><font color="#ffffff"> </font><font color="#ea6e21">0</font><font color="#ffffff"> [<br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;patrol&quot;</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">black</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> energy </font><font color="#ea6e21">80</font><font color="#ffffff"><br />    ]<br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> monitor-failures<br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> role </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;backup&quot;</font><font color="#ffffff"> [<br />    </font><font color="#06b7ff">let</font><font color="#ffffff"> failed-in-zone </font><font color="#be55be">turtles</font><font color="#ffffff"> </font><font color="#be55be">with</font><font color="#ffffff"> [<br />      status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;failed&quot;</font><font color="#ffffff"> </font><font color="#be55be">and</font><font color="#ffffff"> zone </font><font color="#be55be">=</font><font color="#ffffff"> [zone] </font><font color="#be55be">of</font><font color="#ffffff"> </font><font color="#be55be">myself</font><font color="#ffffff"><br />    ]<br /><br />    </font><font color="#06b7ff">if</font><font color="#ffffff"> </font><font color="#be55be">any?</font><font color="#ffffff"> failed-in-zone </font><font color="#be55be">and</font><font color="#ffffff"> status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;standby&quot;</font><font color="#ffffff"> [<br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> role </font><font color="#ea6e21">&quot;main&quot;</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;patrol&quot;</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">black</font><font color="#ffffff"><br />    ]<br /><br />    </font><font color="#06b7ff">if</font><font color="#ffffff"> </font><font color="#be55be">not</font><font color="#ffffff"> </font><font color="#be55be">any?</font><font color="#ffffff"> failed-in-zone </font><font color="#be55be">and</font><font color="#ffffff"> status </font><font color="#be55be">!=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;standby&quot;</font><font color="#ffffff"> [<br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> role </font><font color="#ea6e21">&quot;backup&quot;</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;standby&quot;</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">gray</font><font color="#ffffff"><br />    ]<br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> update-day-night<br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> </font><font color="#be55be">ticks</font><font color="#ffffff"> </font><font color="#be55be">mod</font><font color="#ffffff"> </font><font color="#ea6e21">200</font><font color="#ffffff"> </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">0</font><font color="#ffffff"> [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> is-day? </font><font color="#be55be">not</font><font color="#ffffff"> is-day?<br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> consume-energy<br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;patrol&quot;</font><font color="#ffffff"> </font><font color="#be55be">or</font><font color="#ffffff"> status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;tracking&quot;</font><font color="#ffffff"> [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> energy energy </font><font color="#be55be">-</font><font color="#ffffff"> </font><font color="#ea6e21">0.3</font><font color="#ffffff"><br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> recharge-energy<br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> is-day? [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> energy </font><font color="#be55be">min</font><font color="#ffffff"> </font><font color="#be55be">list</font><font color="#ffffff"> </font><font color="#ea6e21">100</font><font color="#ffffff"> (energy </font><font color="#be55be">+</font><font color="#ffffff"> </font><font color="#ea6e21">0.5</font><font color="#ffffff">)<br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> check-energy<br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> energy </font><font color="#be55be">&lt;=</font><font color="#ffffff"> </font><font color="#ea6e21">10</font><font color="#ffffff"> </font><font color="#be55be">and</font><font color="#ffffff"> role </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;main&quot;</font><font color="#ffffff"> [<br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;charging&quot;</font><font color="#ffffff"><br />    </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">violet</font><font color="#ffffff"><br />  ]<br /><br />  </font><font color="#06b7ff">if</font><font color="#ffffff"> status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;charging&quot;</font><font color="#ffffff"> [<br />    recharge-energy<br />    </font><font color="#06b7ff">if</font><font color="#ffffff"> energy </font><font color="#be55be">&gt;=</font><font color="#ffffff"> </font><font color="#ea6e21">80</font><font color="#ffffff"> [<br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> status </font><font color="#ea6e21">&quot;patrol&quot;</font><font color="#ffffff"><br />      </font><font color="#06b7ff">set</font><font color="#ffffff"> </font><font color="#be55be">color</font><font color="#ffffff"> </font><font color="#ea6e21">black</font><font color="#ffffff"><br />    ]<br />  ]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /></font><font color="#24ac96">to-report</font><font color="#ffffff"> active-drones<br />  </font><font color="#06b7ff">report</font><font color="#ffffff"> </font><font color="#be55be">count</font><font color="#ffffff"> </font><font color="#be55be">turtles</font><font color="#ffffff"> </font><font color="#be55be">with</font><font color="#ffffff"> [status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;patrol&quot;</font><font color="#ffffff"> </font><font color="#be55be">or</font><font color="#ffffff"> status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;tracking&quot;</font><font color="#ffffff">]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /></font><font color="#24ac96">to-report</font><font color="#ffffff"> faileds-drones<br />  </font><font color="#06b7ff">report</font><font color="#ffffff"> </font><font color="#be55be">count</font><font color="#ffffff"> </font><font color="#be55be">turtles</font><font color="#ffffff"> </font><font color="#be55be">with</font><font color="#ffffff"> [status </font><font color="#be55be">=</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;failed&quot;</font><font color="#ffffff">]<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /></font><font color="#24ac96">to-report</font><font color="#ffffff"> average-energy<br />  </font><font color="#06b7ff">report</font><font color="#ffffff"> </font><font color="#be55be">mean</font><font color="#ffffff"> [energy] </font><font color="#be55be">of</font><font color="#ffffff"> </font><font color="#be55be">turtles</font><font color="#ffffff"><br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /></font><font color="#24ac96">to-report</font><font color="#ffffff"> totat-arrests<br />  </font><font color="#06b7ff">report</font><font color="#ffffff"> arrests<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /><br /><br /></font><font color="#24ac96">to</font><font color="#ffffff"> update-plot<br />  </font><font color="#06b7ff">set-current-plot</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;Arrests vs False Positives&quot;</font><font color="#ffffff"><br />  </font><font color="#06b7ff">set-current-plot-pen</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;arrests&quot;</font><font color="#ffffff"><br />  </font><font color="#06b7ff">plot</font><font color="#ffffff"> arrests<br />  </font><font color="#06b7ff">set-current-plot-pen</font><font color="#ffffff"> </font><font color="#ea6e21">&quot;false positives&quot;</font><font color="#ffffff"><br />  </font><font color="#06b7ff">plot</font><font color="#ffffff"> false-positives<br /></font><font color="#24ac96">end</font><font color="#ffffff"><br /></font>
</pre>
